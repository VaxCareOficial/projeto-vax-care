const idEmpresa = sessionStorage.getItem("idEmpresa");
const tipoUsuario = sessionStorage.getItem("tipoUsuario");

window.addEventListener("load", () => {
  if (!idEmpresa) {
    window.location.href = "../login.html";
  }

  // Verificar o tipo de usuário que logou e alterar o menu de acordo.
  if (tipoUsuario == "Funcionário") {
    line2.innerHTML = `
        <button class="active func">
        <svg id="svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
            viewBox="0, 0, 400,400">
            <g id="svgg">
                <path id="path0"
                    d="M357.031 30.887 C 303.112 33.674,305.306 33.331,301.771 39.522 C 297.691 46.666,299.609 50.917,312.840 64.056 L 322.666 73.815 252.559 143.925 L 182.452 214.035 149.625 181.370 C 128.561 160.412,115.677 148.168,113.672 147.204 C 109.405 145.154,99.205 145.135,95.313 147.169 C 90.430 149.721,4.033 236.499,1.879 241.016 C -4.691 254.787,6.716 272.897,22.679 274.039 C 32.064 274.711,31.463 275.185,69.937 236.704 L 104.273 202.361 137.097 235.076 C 172.103 269.964,172.568 270.347,180.660 270.926 C 190.996 271.666,184.294 277.622,274.377 187.645 L 355.395 106.724 366.268 117.360 C 380.305 131.091,384.376 132.355,392.100 125.377 C 396.497 121.404,396.836 119.295,398.476 85.665 C 401.476 24.177,404.689 28.424,357.031 30.887 M325.192 169.730 L 295.313 199.617 295.313 281.474 C 295.313 371.625,295.102 367.707,300.033 369.426 C 304.175 370.870,354.131 370.641,356.985 369.164 C 361.054 367.061,360.938 370.460,360.938 253.545 L 360.938 144.042 358.746 141.943 C 357.541 140.788,356.221 139.844,355.813 139.844 C 355.405 139.844,341.625 153.293,325.192 169.730 M241.016 253.923 C 224.688 270.265,210.188 284.417,208.794 285.372 L 206.261 287.109 206.255 326.622 L 206.250 366.134 208.265 368.028 L 210.280 369.922 237.545 370.146 C 266.697 370.386,268.279 370.207,270.294 366.442 C 270.838 365.425,271.037 341.943,270.903 294.571 L 270.703 224.211 241.016 253.923 M116.406 306.527 L 116.406 365.397 118.293 367.432 C 121.022 370.378,121.286 370.400,150.569 370.150 L 177.310 369.922 179.475 367.756 L 181.641 365.591 181.866 330.224 L 182.091 294.858 175.736 293.932 C 163.152 292.098,160.191 290.051,137.467 267.478 C 126.492 256.576,117.264 247.656,116.960 247.656 C 116.655 247.656,116.406 274.148,116.406 306.527 M70.313 268.985 C 46.164 292.914,44.499 294.045,28.711 297.250 L 26.563 297.686 26.563 330.561 C 26.563 374.874,22.735 370.313,59.921 370.313 C 88.778 370.313,89.704 370.171,91.322 365.532 C 92.317 362.677,92.590 248.426,91.602 248.454 C 91.279 248.463,81.699 257.702,70.313 268.985 "
                    stroke="none" fill="#3ca9c2" fill-rule="evenodd"></path>
            </g>
        </svg>
            Dashboard
        </button>
        `;
  } else {
    line2.innerHTML = `
      <button onclick="redirecionarUsuario()" id="usuarioBtn" class="active">
        <svg id="svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
          viewBox="0, 0, 400,400">
          <g id="svgg">
            <path id="path0"
              d="M192.011 30.534 C 122.891 37.848,107.464 133.049,170.554 162.939 C 229.634 190.928,291.488 127.163,262.299 68.359 C 251.020 45.638,220.775 27.266,198.828 29.805 C 198.398 29.855,195.331 30.183,192.011 30.534 M69.834 95.260 C 35.440 100.741,15.881 138.469,31.180 169.817 C 53.896 216.361,122.381 204.977,129.836 153.418 C 134.685 119.880,103.714 89.861,69.834 95.260 M315.234 95.039 C 270.645 102.168,254.047 155.491,287.019 185.685 C 321.017 216.818,376.493 190.561,373.966 144.531 C 372.295 114.084,344.199 90.408,315.234 95.039 M157.182 183.623 C 133.307 186.855,113.509 204.698,108.072 227.881 C 105.735 237.848,105.877 360.029,108.231 364.035 C 111.970 370.400,104.522 369.922,200.000 369.922 C 295.478 369.922,288.030 370.400,291.769 364.035 C 294.123 360.029,294.265 237.848,291.928 227.881 C 287.158 207.543,270.765 190.679,250.224 184.982 C 243.613 183.149,168.762 182.055,157.182 183.623 M46.934 214.131 C 29.017 217.646,14.155 228.987,5.881 245.459 C -0.004 257.176,-0.094 258.091,0.164 303.948 L 0.391 344.225 3.267 350.042 C 11.848 367.394,19.957 370.246,60.829 370.287 L 86.111 370.313 85.439 367.383 C 85.068 365.771,84.766 333.867,84.766 296.484 L 84.766 228.516 86.524 222.132 C 87.492 218.621,88.496 215.193,88.756 214.515 C 89.295 213.111,53.790 212.786,46.934 214.131 M311.218 214.448 C 311.492 215.163,312.508 218.621,313.476 222.132 L 315.234 228.516 315.234 296.484 C 315.234 333.867,314.932 365.771,314.561 367.383 L 313.889 370.313 339.171 370.287 C 380.043 370.246,388.152 367.394,396.733 350.042 L 399.609 344.225 399.836 303.948 C 400.094 258.091,400.004 257.176,394.119 245.459 C 386.768 230.826,375.041 220.849,358.984 215.568 C 351.560 213.127,310.340 212.160,311.218 214.448 "
              stroke="none" fill="#3ca9c2" fill-rule="evenodd"></path>
          </g>
        </svg>
        Gerenciar <br> usuário
      </button>

      <button onclick="redirecionarRefrigerador()" id="refrigeradorBtn">
      <svg id="svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="400"
      viewBox="0, 0, 400,400">
      <g id="svgg">
          <path id="path0"
              d="M104.862 1.533 C 96.300 4.628,89.811 10.661,85.691 19.357 L 83.203 24.609 82.985 85.742 L 82.767 146.875 200.000 146.875 L 317.233 146.875 317.015 85.742 L 316.797 24.609 314.296 19.329 C 310.980 12.330,305.220 6.343,298.611 3.026 L 293.359 0.391 201.172 0.217 C 112.205 0.049,108.840 0.095,104.862 1.533 M137.829 38.560 C 142.095 41.355,142.188 42.225,142.188 79.687 C 142.188 124.045,142.994 121.875,126.512 121.875 L 117.031 121.875 114.375 119.219 L 111.719 116.562 111.719 79.826 L 111.719 43.089 113.737 40.690 C 117.238 36.529,132.650 35.166,137.829 38.560 M123.438 79.297 L 123.438 110.156 126.953 110.156 L 130.469 110.156 130.469 79.297 L 130.469 48.438 126.953 48.438 L 123.438 48.438 123.438 79.297 M82.994 259.570 L 83.203 360.547 85.691 365.799 C 90.195 375.306,100.018 383.185,109.326 384.757 L 112.500 385.294 112.500 389.951 C 112.500 399.917,112.688 400.000,135.256 400.000 L 153.196 400.000 155.114 398.082 C 156.787 396.409,157.031 395.463,157.031 390.661 L 157.031 385.156 200.000 385.156 L 242.969 385.156 242.969 390.661 C 242.969 395.463,243.213 396.409,244.886 398.082 L 246.804 400.000 264.744 400.000 C 287.312 400.000,287.500 399.917,287.500 389.951 L 287.500 385.294 290.674 384.757 C 299.069 383.339,309.337 375.691,313.328 367.884 C 317.283 360.147,317.168 363.442,317.178 257.617 L 317.188 158.594 199.986 158.594 L 82.784 158.594 82.994 259.570 M136.695 184.593 C 137.757 185.130,139.427 186.759,140.406 188.213 L 142.188 190.856 142.188 235.349 C 142.188 291.117,143.301 287.500,126.133 287.500 L 117.031 287.500 114.375 284.844 L 111.719 282.187 111.719 236.367 C 111.719 186.320,111.633 187.306,116.221 184.817 C 118.968 183.326,133.869 183.163,136.695 184.593 M123.438 235.547 L 123.438 275.781 126.953 275.781 L 130.469 275.781 130.469 235.547 L 130.469 195.313 126.953 195.313 L 123.438 195.313 123.438 235.547 "
              stroke="none" fill="#3ca9c2" fill-rule="evenodd"></path>
      </g>
      </svg>
        Gerenciar <br> refrigerador
      </button>

      <button onclick="redirecionarEnderecoFilial()" id="enderecoFilialBtn">
      <svg id="svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="400"
      viewBox="0, 0, 400,400">
      <g id="svgg">
        <path id="path0"
      d="M192.188 51.532 C 187.466 54.058,37.333 188.035,35.156 191.665 C 24.655 209.177,47.800 225.221,63.328 211.193 L 66.406 208.412 66.406 272.803 L 66.406 337.193 68.385 341.165 C 69.621 343.645,71.575 345.975,73.591 347.373 L 76.818 349.609 115.743 349.826 C 170.499 350.130,167.188 352.830,167.188 307.892 C 167.188 266.852,166.889 267.222,200.000 267.222 C 233.133 267.222,232.813 266.822,232.813 308.080 C 232.813 352.880,229.424 350.131,284.257 349.826 L 323.182 349.609 326.409 347.373 C 328.425 345.975,330.379 343.645,331.615 341.165 L 333.594 337.193 333.594 272.803 L 333.594 208.412 336.672 211.193 C 352.944 225.894,376.741 207.486,363.884 190.143 C 361.201 186.523,210.982 53.216,207.648 51.496 C 203.774 49.497,195.957 49.515,192.188 51.532 "
      stroke="none" fill="#3ca9c2" fill-rule="evenodd"></path>
      </g>
      </svg>
        Gerenciar <br> endereço filial
      </button>
        `;
  }

  // Alterar a cor do texto do botão da página que está ativa.
  if (window.location.pathname == "/dashboard/usuario.html") {
    usuarioBtn.classList.add("active");
    refrigeradorBtn.classList.remove("active");
    enderecoFilialBtn.classList.remove("active");
  } else if (window.location.pathname == "/dashboard/refrigerador.html") {
    usuarioBtn.classList.remove("active");
    refrigeradorBtn.classList.add("active");
    enderecoFilialBtn.classList.remove("active");
  } else if (window.location.pathname == "/dashboard/endereco-filial.html") {
    usuarioBtn.classList.remove("active");
    refrigeradorBtn.classList.remove("active");
    enderecoFilialBtn.classList.add("active");
  }
});

function redirecionarDashboard() {
  window.location.href = "../dashboard/dashboard.html";
}

function redirecionarUsuario() {
  window.location.href = "../dashboard/usuario.html";
}

function redirecionarRefrigerador() {
  window.location.href = "../dashboard/refrigerador.html";
}

function redirecionarEnderecoFilial() {
  window.location.href = "../dashboard/endereco-filial.html";
}

function abrirModalLogout(modal) {
  modalLogoutBackground.classList.add("active");

  var idModal = modal.getAttribute("data-modal");

  document.getElementById(idModal).classList.add("active");
}

function fecharModalLogout(modal) {
  modalLogoutBackground.classList.remove("active");

  var idModal = modal.getAttribute("data-modal");

  document.getElementById(idModal).classList.remove("active");
}

function abrirModal(text, func) {
  modalBackground.classList.add("active");
  modal.classList.add("active");
  textModal.innerHTML = text;

  func;
}

function fecharModal() {
  modalBackground.classList.remove("active");
  modal.classList.remove("active");
}

function retornarIndex() {
  sessionStorage.clear();
  window.location.href = "../index.html"
}